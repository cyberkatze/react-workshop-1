<!DOCTYPE html>
<html>
  <head>
    <title>React JS Workshop</title>
    <link rel="stylesheet" type="text/css" href="bootstrap/css/bootstrap.min.css">
    <script src="react.js"></script>
    <script src="JSXTransformer.js"></script>
  </head>
  <body>
    <script type="text/jsx">
      /** @jsx React.DOM */

      var Calculator = React.createClass({
        getInitialState: function(){
          return {
            items: [
              {id: 1, name: "MacBook Air", date: "14.07.2014", amount: -20000}
            ]
          };
        },
        render: function(){
          var total = 0;

          var rows = this.state.items.map(function(item){
            total += item.amount;
            return <TableRow key={item.id} name={item.name} date={item.date} amount={item.amount} />
          });

          return(
            <table className="table table-bordered">
              <thead>
                <tr key="head">
                  <th>Название</th>
                  <th>Дата</th>
                  <th>Деньги</th>
                </tr>
              </thead>

              <tbody>
                {rows}

                <tr className="info" key="total">
                  <th>Итого</th>
                  <th></th>
                  <th>{total}</th>
                </tr>
              </tbody>
            </table>
          );
        }
      });

      var TableRow = React.createClass({
        render: function() {
          return(
            <tr>
              <td>{this.props.name}</td>
              <td>{this.props.date}</td>
              <td>{this.props.amount}</td>
            </tr>
          );
        }
      });
      React.renderComponent(
        <Calculator />,
        document.body
      );
    </script>

  </body>
</html>
